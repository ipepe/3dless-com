(function(){window.ThreejsSimplifier=function(){function e(e){this.renderer=new THREE.WebGLRenderer({preserveDrawingBuffer:!0,useDevicePixelRatio:!1,devicePixelRatio:1,alpha:!0,antialias:!0}),this.preview=$(e),this.preview.append(this.renderer.domElement),this.camera=new THREE.PerspectiveCamera(45,this.width()/this.height(),.1,1e4),this.scene=new THREE.Scene,this.scene.add(this.camera),this.renderer.setSize(this.width(),this.height()),this.renderer.shadowMap.enabled=parseInt(navigator.hardwareConcurrency||"2")>3,this.renderer.setClearColor(0,0),this.setupCameraAndControls(),this.setupLight(),this.material=new THREE.MeshPhongMaterial({color:"#fff"}),(new THREE.STLLoader).load("models/3DBenchy.stl",function(e){return function(t){return t.center(),e.mesh=new THREE.Mesh(t,e.material),e.mesh.rotation.x=-Math.PI/2,e.mesh.castShadow=!0,e.mesh.receiveShadow=!0,e.scene.add(e.mesh)}}(this)),this.animate()}return e.prototype.renderer=null,e.prototype.camera=null,e.prototype.scene=null,e.prototype.preview=null,e.prototype.setupCameraAndControls=function(){return this.camera.updateProjectionMatrix(),this.camera.lookAt(new THREE.Vector3(0,25,0)),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(-135,75,-135),this.controls.update()},e.prototype.setupLight=function(){var e,t,r;return r=new THREE.HemisphereLight(16777215,16777215,.6),r.color.setHSL(.6,1,.6),r.groundColor.setHSL(.095,1,.75),r.position.set(0,50,0),this.scene.add(r),t=new THREE.DirectionalLight(16777215,1),t.color.setHSL(.1,1,.95),t.position.set(-1,1.75,1),t.position.multiplyScalar(30),this.scene.add(t),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,e=50,t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.shadow.camera.far=3500,t.shadow.bias=-1e-4},e.prototype.width=function(){var e,t;return t=parseInt(this.preview.css("border-right-width")),e=parseInt(this.preview.css("border-left-width")),this.preview.parent().width()-e-t},e.prototype.height=function(){var e,t;return t=parseInt(this.preview.css("border-top-width")),e=parseInt(this.preview.css("border-bottom-width")),this.preview.parent().height()-t-e},e.prototype.animate=function(){return this.render(),window.requestAnimationFrame(function(e){return function(){return e.animate()}}(this))},e.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},e}()}).call(this);